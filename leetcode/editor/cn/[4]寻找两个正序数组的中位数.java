//ç»™å®šä¸¤ä¸ªå¤§å°åˆ†åˆ«ä¸º m å’Œ n çš„æ­£åºï¼ˆä»å°åˆ°å¤§ï¼‰æ•°ç»„ nums1 å’Œ nums2ã€‚è¯·ä½ æ‰¾å‡ºå¹¶è¿”å›è¿™ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ ä¸­ä½æ•° ã€‚ 
//
// ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦åº”è¯¥ä¸º O(log (m+n)) ã€‚ 
//
// 
//
// ç¤ºä¾‹ 1ï¼š 
//
// 
//è¾“å…¥ï¼šnums1 = [1,3], nums2 = [2]
//è¾“å‡ºï¼š2.00000
//è§£é‡Šï¼šåˆå¹¶æ•°ç»„ = [1,2,3] ï¼Œä¸­ä½æ•° 2
// 
//
// ç¤ºä¾‹ 2ï¼š 
//
// 
//è¾“å…¥ï¼šnums1 = [1,2], nums2 = [3,4]
//è¾“å‡ºï¼š2.50000
//è§£é‡Šï¼šåˆå¹¶æ•°ç»„ = [1,2,3,4] ï¼Œä¸­ä½æ•° (2 + 3) / 2 = 2.5
// 
//
// 
//
// 
//
// æç¤ºï¼š 
//
// 
// nums1.length == m 
// nums2.length == n 
// 0 <= m <= 1000 
// 0 <= n <= 1000 
// 1 <= m + n <= 2000 
// -10â¶ <= nums1[i], nums2[i] <= 10â¶ 
// 
//
// Related Topics æ•°ç»„ äºŒåˆ†æŸ¥æ‰¾ åˆ†æ²» ğŸ‘ 7763 ğŸ‘ 0


//leetcode submit region begin(Prohibit modification and deletion)
class Solution {
    //    // æ’åºæ³•ï¼šå°†ä¸¤ä¸ªæœ‰åºæ•°ç»„åˆå¹¶æˆä¸€ä¸ªæœ‰åºæ•°ç»„ï¼Œç„¶åæ ¹æ®æ€»é•¿åº¦å¥‡å¶æ€§è®¡ç®—ä¸­ä½æ•°
//    // æ—¶é—´å¤æ‚åº¦ï¼šO(m+n)ï¼Œç©ºé—´å¤æ‚åº¦ï¼šO(m+n)
//    public double findMedianSortedArrays(int[] nums1, int[] nums2) {
//        int m = nums1.length;
//        int n = nums2.length;
//
//        // åˆ›å»ºåˆå¹¶åçš„æ•°ç»„
//        int[] nums = new int[m + n];
//        int i = 0, j = 0, k = 0;
//
//        // åŒæŒ‡é’ˆåˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„
//        while (i < m && j < n) {
//            if (nums1[i] < nums2[j]) {
//                nums[k] = nums1[i];
//                i++;
//                k++;
//            } else {
//                nums[k] = nums2[j];
//                j++;
//                k++;
//            }
//        }
//
//        // å°†å‰©ä½™å…ƒç´ æ·»åŠ åˆ°åˆå¹¶æ•°ç»„ä¸­
//        while (i < m) {
//            nums[k] = nums1[i];
//            i++;
//            k++;
//        }
//        while (j < n) {
//            nums[k] = nums2[j];
//            j++;
//            k++;
//        }
//
//        // æ ¹æ®æ€»é•¿åº¦å¥‡å¶æ€§è®¡ç®—ä¸­ä½æ•°
//        if ((m + n) % 2 == 0){
//            // å¶æ•°ä¸ªå…ƒç´ ï¼šå–ä¸­é—´ä¸¤ä¸ªæ•°çš„å¹³å‡å€¼
//            return (nums[(m + n) / 2] + nums[(m + n) / 2 - 1]) / 2.0;
//        }
//        // å¥‡æ•°ä¸ªå…ƒç´ ï¼šå–ä¸­é—´çš„æ•°
//        return nums[(m + n) / 2];
//    }
    //äºŒåˆ†æŸ¥æ‰¾
    public double findMedianSortedArrays(int[] nums1, int[] nums2) {
        // ç¡®ä¿ nums1 æ˜¯è¾ƒçŸ­çš„æ•°ç»„ï¼Œè¿™æ ·å¯ä»¥å‡å°‘äºŒåˆ†æŸ¥æ‰¾çš„æ¬¡æ•°
        if (nums1.length > nums2.length) {
            return findMedianSortedArrays(nums2, nums1);
        }

        int m = nums1.length;
        int n = nums2.length;

        // äºŒåˆ†æŸ¥æ‰¾çš„è¾¹ç•Œ
        // left: nums1æ•°ç»„åˆ†å‰²ç‚¹çš„å·¦è¾¹ç•Œï¼ˆæœ€å°å¯ä»¥å–åˆ°0ï¼Œè¡¨ç¤ºnums1ä¸­æ‰€æœ‰å…ƒç´ éƒ½åœ¨å³åŠéƒ¨åˆ†ï¼‰
        // right: nums1æ•°ç»„åˆ†å‰²ç‚¹çš„å³è¾¹ç•Œï¼ˆæœ€å¤§å¯ä»¥å–åˆ°mï¼Œè¡¨ç¤ºnums1ä¸­æ‰€æœ‰å…ƒç´ éƒ½åœ¨å·¦åŠéƒ¨åˆ†ï¼‰
        int left = 0, right = m;

        // totalLeft: åˆå¹¶åæ•°ç»„å·¦åŠéƒ¨åˆ†éœ€è¦çš„å…ƒç´ ä¸ªæ•°
        // å¯¹äºå¥‡æ•°é•¿åº¦æ•°ç»„ï¼Œå·¦åŠéƒ¨åˆ†æ¯”å³åŠéƒ¨åˆ†å¤šä¸€ä¸ªå…ƒç´ 
        int totalLeft = (m + n + 1) / 2;

        // ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾ç¡®å®šåˆ†å‰²ç‚¹ä½ç½®
        while (left < right) {
            // i: nums1 ä¸­åˆ†å‰²ç‚¹å³ä¾§çš„ç¬¬ä¸€ä¸ªå…ƒç´ ç´¢å¼•ï¼ˆå³nums1[0...i-1]å±äºå·¦åŠéƒ¨åˆ†ï¼‰
            // è¿™é‡Œé‡‡ç”¨å‘ä¸Šå–æ•´çš„æ–¹å¼è®¡ç®—ä¸­é—´ç‚¹ï¼Œé¿å…æ­»å¾ªç¯
            int i = left + (right - left + 1) / 2;
            // j: nums2 ä¸­åˆ†å‰²ç‚¹å³ä¾§çš„ç¬¬ä¸€ä¸ªå…ƒç´ ç´¢å¼•ï¼ˆç”±çº¦æŸæ¡ä»¶ç¡®å®šï¼‰
            // å› ä¸ºå·¦åŠéƒ¨åˆ†æ€»å…±éœ€è¦totalLeftä¸ªå…ƒç´ ï¼Œå…¶ä¸­nums1è´¡çŒ®äº†iä¸ªï¼Œæ‰€ä»¥nums2éœ€è¦è´¡çŒ®totalLeft-iä¸ª
            int j = totalLeft - i;

            // æ ¸å¿ƒåˆ¤æ–­é€»è¾‘ï¼š
            // å¦‚æœnums1[i-1] > nums2[j]ï¼Œè¯´æ˜nums1çš„å·¦åŠéƒ¨åˆ†å¤ªå¤§äº†ï¼Œéœ€è¦å‘å·¦ç§»åŠ¨åˆ†å‰²ç‚¹
            // å³å‡å°içš„å€¼ï¼Œå› æ­¤å°†rightè®¾ä¸ºi-1
            if (nums1[i - 1] > nums2[j]) {
                right = i - 1;
            } else {
                // å¦åˆ™è¯´æ˜å½“å‰åˆ†å‰²ç‚¹å¯èƒ½æ˜¯æ­£ç¡®çš„æˆ–è€…æ˜¯åå°çš„ï¼Œéœ€è¦å‘å³ç§»åŠ¨æˆ–ä¿æŒä¸å˜
                // å°†leftè®¾ä¸ºiï¼Œç»§ç»­å‘å³æœç´¢
                left = i;
            }
        }

        // å¾ªç¯ç»“æŸåï¼Œleftå°±æ˜¯æœ€ä¼˜çš„åˆ†å‰²ç‚¹ä½ç½®
        int i = left;
        int j = totalLeft - i;

        // å¤„ç†è¾¹ç•Œæƒ…å†µï¼Œè·å–å››ä¸ªå…³é”®å€¼ï¼š
        // nums1LeftMax: nums1å·¦åŠéƒ¨åˆ†çš„æœ€å¤§å€¼
        int nums1LeftMax = (i == 0) ? Integer.MIN_VALUE : nums1[i - 1];
        // nums1RightMin: nums1å³åŠéƒ¨åˆ†çš„æœ€å°å€¼
        int nums1RightMin = (i == m) ? Integer.MAX_VALUE : nums1[i];
        // nums2LeftMax: nums2å·¦åŠéƒ¨åˆ†çš„æœ€å¤§å€¼
        int nums2LeftMax = (j == 0) ? Integer.MIN_VALUE : nums2[j - 1];
        // nums2RightMin: nums2å³åŠéƒ¨åˆ†çš„æœ€å°å€¼
        int nums2RightMin = (j == n) ? Integer.MAX_VALUE : nums2[j];

        // æ ¹æ®æ€»é•¿åº¦å¥‡å¶æ€§è¿”å›ä¸­ä½æ•°
        if ((m + n) % 2 == 1) {
            // å¥‡æ•°æƒ…å†µï¼šä¸­ä½æ•°æ˜¯å·¦åŠéƒ¨åˆ†çš„æœ€å¤§å€¼
            return Math.max(nums1LeftMax, nums2LeftMax);
        } else {
            // å¶æ•°æƒ…å†µï¼šä¸­ä½æ•°æ˜¯å·¦åŠéƒ¨åˆ†æœ€å¤§å€¼å’Œå³åŠéƒ¨åˆ†æœ€å°å€¼çš„å¹³å‡å€¼
            return (Math.max(nums1LeftMax, nums2LeftMax) +
                    Math.min(nums1RightMin, nums2RightMin)) / 2.0;
        }
    }
}
//leetcode submit region end(Prohibit modification and deletion)
